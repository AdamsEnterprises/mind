<template name="Meeting.DisplayComponent">
  {{#if notFound}}
    {{> NotFoundComponent}}
  {{else}}
    {{#if canEdit}}
      <div class="fixed-action-btn">
        <a href="{{pathFor 'Meeting.discussions' params=meeting}}" class="btn-floating btn-large waves-effect waves-light red">
          <i class="large material-icons">playlist_add_check</i>
        </a>
      </div>
    {{/if}}
    <div class="section meeting">
      <div class="row">
        <h4 class="col s12">
          {{> ExpandableButton}}{{meeting.title}}
        </h4>
      </div>
      <div class="row">
        <div class="col s12">
          Time: {{formatStartEndDate meeting.startAt meeting.endAt DEFAULT_DATETIME_FORMAT DEFAULT_TIME_FORMAT}}
        </div>
      </div>
      {{#if meeting.descriptionDisplay}}
        <div class="row">
          <div class="col s12 trix-content">
            {{! Remember to sanitize content in all codepaths which allow users to provide this content. }}
            {{{meeting.descriptionDisplay}}}
          </div>
        </div>
      {{/if}}
      {{#if isExpanded}}
        <div class="row expansion">
          <div class="col s12">
            <div class="divider"></div>
            {{#with meeting}}
              {{> MetadataComponent args editButton='Meeting.EditButton'}}
            {{/with}}
          </div>
        </div>
      {{/if}}
    </div>
    <div class="section">
      {{#if discussions.exists}}
        <ul class="collection z-depth-1">
          {{#each discussions}}
            {{> Meeting.DiscussionsListItemComponent}}
          {{/each}}
        </ul>
      {{/if}}
    </div>
  {{/if}}
</template>

<template name="Meeting.EditButton">
  <a href="{{pathFor 'Meeting.edit' params=data}}" class="metadata-button waves-effect waves-light btn-flat right" title="Edit"><i class="material-icons tiny">edit</i></a>
</template>

<template name="Meeting.DiscussionsListItemComponent">
  <li class="collection-item">
    <a href="{{pathFor 'Discussion.display' params=data}}">{{title}}</a>
  </li>
</template>
