<template name="Discussion.DisplayComponent">
  {{#if notFound}}
    {{> NotFoundComponent}}
  {{else}}
    {{#if canClose}}
      <div class="fixed-action-btn">
        <a href="{{pathFor 'Discussion.close' params=discussion}}" class="btn-floating btn-large waves-effect waves-light red">
          <i class="large material-icons">stop</i>
        </a>
      </div>
    {{/if}}
    <div class="section discussion">
      <div class="row">
        <h4 class="col s12">
          {{> ExpandableButton}}{{discussion.title}}
        </h4>
      </div>
      {{#if discussion.descriptionDisplay}}
        <div class="row">
          <div class="col s12 trix-content">
            {{! Remember to sanitize content in all codepaths which allow users to provide this content. }}
            {{{discussion.descriptionDisplay}}}
          </div>
        </div>
      {{/if}}
      {{#if isExpanded}}
        <div class="row expansion">
          <div class="col s12">
            <div class="divider"></div>
            {{#with discussion}}
              {{> MetadataComponent args editButton='Discussion.EditButton'}}
            {{/with}}
          </div>
        </div>
      {{/if}}
      {{#if discussion.isClosed}}
        <div class="center-align success card-panel">
          This discussion is closed.
        </div>
      {{/if}}
    </div>
  {{/if}}
</template>

<template name="Discussion.EditButton">
  <a href="{{pathFor 'Discussion.edit' params=data}}" class="metadata-button waves-effect waves-light btn-flat right" title="Edit"><i class="material-icons tiny">edit</i></a>
</template>
